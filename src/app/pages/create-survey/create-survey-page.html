<main class="create-survey-page">
  <section class="create-survey-canvas" aria-label="Create survey workspace">
    <div class="create-survey-header">
      <h1 class="create-survey-title">Create new survey</h1>
      <button class="cancel-button" type="button" aria-label="Cancel" [routerLink]="['/']">
        <span class="cancel-button__text">Cancel</span>
        <img class="cancel-button__icon" src="/assets/close.svg" alt="" />
      </button>
    </div>
    <div class="create-survey-form-surface">
      <div class="create-survey-top-row">
        <div class="create-survey-inputs">
          <div class="create-survey-input-group">
            <label class="create-survey-field-title" for="survey-name-input">Survey name</label>
            <div class="create-survey-input-row">
              <input class="create-survey-input" id="survey-name-input" type="text" aria-label="Survey title" />

              <button class="delete-button" type="button" aria-label="Delete survey input">
                <img class="delete-button__icon" src="/assets/delete-icon.svg" alt="" />
                <img class="delete-button__icon-hover" src="/assets/delete-icon-hover.svg" alt="" />
              </button>
            </div>
          </div>

          <div class="create-survey-input-group create-survey-input-group--split">
            <label class="create-survey-field-title" for="survey-end-date-input">
              Set end date <span class="create-survey-field-title-optional">(optional)</span>
            </label>
            <div class="create-survey-input-row create-survey-input-row--split">
              <div class="create-survey-input-row__left">
                <input
                  class="create-survey-input create-survey-input--short"
                  id="survey-end-date-input"
                  type="text"
                  aria-label="Set end date optional"
                />

                <button class="delete-button" type="button" aria-label="Delete option input">
                  <img class="delete-button__icon" src="/assets/delete-icon.svg" alt="" />
                  <img class="delete-button__icon-hover" src="/assets/delete-icon-hover.svg" alt="" />
                </button>
              </div>

              <button
                class="category-dropdown-button"
                type="button"
                aria-label="Choose category dropdown"
                [attr.aria-expanded]="isCategoryDropdownOpen"
                [class.is-open]="isCategoryDropdownOpen"
                (click)="toggleCategoryDropdown()"
              >
                <span class="category-dropdown__label">Choose categorie</span>
                <span class="category-dropdown__arrow" aria-hidden="true"></span>
              </button>
            </div>
          </div>
        </div>

        <section class="description-block" aria-label="Describing text optional">
          <h2 class="description-block__title">
            Describing text <span class="description-block__title-optional">(optional)</span>
          </h2>
          <div class="description-block__input-row">
            <textarea class="description-block__input" aria-label="Describing text optional"></textarea>
            <button class="delete-button description-block__delete" type="button" aria-label="Delete description text">
              <img class="delete-button__icon" src="/assets/delete-icon.svg" alt="" />
              <img class="delete-button__icon-hover" src="/assets/delete-icon-hover.svg" alt="" />
            </button>
          </div>
        </section>
      </div>

      <section class="question-block" aria-label="Question block">
        <h2 class="question-block__title">1. Question</h2>

        <div class="question-block__row">
          <div class="question-block__input-wrap">
            <button class="delete-button question-block__delete" type="button" aria-label="Delete question">
              <img class="delete-button__icon" src="/assets/delete-icon.svg" alt="" />
              <img class="delete-button__icon-hover" src="/assets/delete-icon-hover.svg" alt="" />
            </button>

            <input class="create-survey-input question-block__input" type="text" aria-label="Question text" />
          </div>

          <button class="add-question-button" type="button" aria-label="Add new question">
            <span class="add-question-button__text">Add new question</span>
            <img class="add-question-button__icon" src="/assets/add_circle-white.svg" alt="" />
          </button>
        </div>

        <div class="answers-block" aria-label="Answers">
          <div class="answers-block__header">
            <h3 class="answers-block__title">Answers</h3>

            <label class="answers-toggle" for="allow-multiple-answers">
              <input class="answers-toggle__input" id="allow-multiple-answers" type="checkbox" />
              <span class="answers-toggle__checkbox" aria-hidden="true"></span>
              <span class="answers-toggle__text">Allow multiple answers.</span>
            </label>
          </div>

          <div class="answers-block__list" aria-label="Answer inputs list">
            @for (answerIndex of answerFieldIndexes; track answerIndex; let index = $index) {
              <div class="answer-row">
                <span class="answer-row__label">{{ getAnswerLabel(index) }}.</span>
                <input
                  class="create-survey-input answer-row__input"
                  type="text"
                  [attr.aria-label]="'Answer ' + getAnswerLabel(index)"
                />
                <button
                  class="delete-button"
                  type="button"
                  [attr.aria-label]="'Delete answer ' + getAnswerLabel(index)"
                >
                  <img class="delete-button__icon" src="/assets/delete-icon.svg" alt="" />
                  <img class="delete-button__icon-hover" src="/assets/delete-icon-hover.svg" alt="" />
                </button>
              </div>
            }
          </div>

          <button
            class="add-answer-button"
            type="button"
            aria-label="Add answer"
            [disabled]="answerFieldIndexes.length >= maxAnswerFields"
            (click)="addAnswerField()"
          >
            <span class="add-answer-button__text">Add answer</span>
            <img class="add-answer-button__icon" src="/assets/add_circle-white.svg" alt="" />
          </button>
        </div>
      </section>
    </div>

    <div class="create-survey-footer">
      <button class="create-survey-submit-button" type="button" aria-label="Publish survey">
        <span class="create-survey-submit-button__text">Publish</span>
        <img class="create-survey-submit-button__icon" src="/assets/check.svg" alt="" />
      </button>
    </div>
  </section>
</main>
